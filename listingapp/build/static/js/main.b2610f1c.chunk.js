(this.webpackJsonplistingapp=this.webpackJsonplistingapp||[]).push([[0],{14:function(e,t,a){},33:function(e,t,a){},55:function(e,t,a){"use strict";a.r(t);var r=a(0),s=a(1),n=a.n(s),c=a(23),i=a.n(c),o=(a(33),a(24)),l=a(25),u=a(27),d=a(26),h=(a(14),a(10)),g=a.n(h),f=a(8),b=a(5),v=a.n(b);function j(e){return Object(r.jsxs)("table",{children:[Object(r.jsx)("thead",{children:Object(r.jsx)("tr",{children:v.a.map(e.tableHeaders,(function(e,t){return Object(r.jsx)("th",{children:e},t)}))},"thead")}),Object(r.jsx)("tbody",{children:e.categoryData?v.a.map(e.categoryData,(function(t,a){return Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:t.id}),Object(r.jsx)("td",{children:t.name}),Object(r.jsx)("td",{children:t.color.join(", ")}),Object(r.jsx)("td",{children:t.price}),Object(r.jsx)("td",{children:t.manufacturer}),t.availability?Object(r.jsx)("td",{children:t.availability}):Object(r.jsx)("td",{children:Object(r.jsx)(f.a,{id:"button"+t.manufacturer+a,className:t.manufacturer,onClick:function(a){return e.fetchAvailability(t.manufacturer,a)},children:"Fetch availability"})})]},a)})):Object(r.jsx)("td",{children:Object(r.jsx)("tr",{children:"There was no category data. Try refresing page."})},"noData")})]})}var y=a(11),m=a(12),A=a(13),O=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(o.a)(this,a),(s=t.call(this,e)).fetchCategories=function(){var e=s.categories,t={headers:{"Access-Control-Allow-Origin":"*"}};e.forEach((function(e){g.a.get("https://bad-api-assignment.reaktor.com/v2/products/"+e,t).then((function(t){if(200===t.status)switch(e){case"beanies":return void s.setState({currCategory:"beanies",beanies:t.data});case"gloves":return void s.setState({gloves:t.data});case"facemasks":return void s.setState({facemasks:t.data});default:return}else s.setState({fetchCGErrorMsg:"Server responsed with nothing. Try again by refreshing the page."})})).catch((function(e){s.setState({fetchCGErrorMsg:"The requested server was unavailable. Try again by refreshing the page."})}))}))},s.fetchAvailability=function(e,t){s.setState({fetchAVErrorMsg:""});var a=!0;s.avErrorToken=!1;var r=document.getElementById(t.target.id);s.manufacturerAV.every((function(t){return t.manufacturer!==e||(a=!1,s.addAvailability(e),!1)})),a&&!r.classList.contains("processing")&&(s.addProcessing("button",e),g.a.get("https://bad-api-assignment.reaktor.com/v2/availability/"+e,{headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET","Access-Control-Allow-Headers":"Content-Type"}}).then((function(t){var a=document.querySelectorAll("button");v.a.forEach(a,(function(e){e.classList.contains("categoryButton")&&(e.disabled=!1)})),s.removeProcessing("button",e),200===t.status?Array.isArray(t.data.response)?s.manufacturerAV.push({manufacturer:e,data:t.data.response}):(s.setState({fetchAVErrorMsg:"Fetching received nothing. Try again."}),s.avErrorToken=!0):404===t.status?(s.setState({fetchAVErrorMsg:"Availability of the manufacturer's product wasn't found. Try again."}),s.avErrorToken=!0):503===t.status&&(s.setState({fetchAVErrorMsg:"Server was unavailable. Try again."}),s.avErrorToken=!0)})).then((function(){return!s.avErrorToken&&s.addAvailability(e)})).catch((function(t){return s.removeProcessing("button",e),s.setState({fetchAVErrorMsg:"Server was unavailable. Try again."}),console.log(t)})))},s.setAvailability=function(e,t){var a=s.manufacturerAV,r=e;return v.a.forEach(r,(function(e,n){v.a.forEach(a,(function(a){a.manufacturer===t&&v.a.forEach(a.data,(function(t){e.id===t.id.toLowerCase()&&(r[n].availability=t.DATAPAYLOAD.match(s.stockRegex)[1])}))}))})),r},s.addAvailability=function(e){switch(s.state.currCategory){case"beanies":var t=s.setAvailability(s.state.beanies,e);return void s.setState({beanies:t});case"facemasks":var a=s.setAvailability(s.state.facemasks,e);return void s.setState({facemasks:a});case"gloves":var n=s.setAvailability(s.state.gloves,e);return void s.setState({gloves:n});default:return Object(r.jsx)("p",{children:"No current caregory selected. Try pressing the button or reload the window"})}},s.setCategory=function(e){s.setState({currCategory:e.target.value})},s.getCategory=function(e){switch(e){case"beanies":return s.state.beanies;case"facemasks":return s.state.facemasks;case"gloves":return s.state.gloves;default:return null}},s.addProcessing=function(e,t){var a=document.querySelectorAll(e);v.a.forEach(a,(function(e){e.classList.contains(t)&&(e.classList.add("processing"),e.disabled=!0),e.classList.contains("categoryButton")&&(e.disabled=!0)}))},s.removeProcessing=function(e,t){var a=document.querySelectorAll(e);v.a.forEach(a,(function(e){e.classList.contains(t)&&(e.classList.remove("processing"),e.disabled=!1),e.classList.contains("categoryButton")&&(e.disabled=!1)}))},s.componentDidMount=function(){s.fetchCategories()},s.state={currCategory:null,beanies:null,facemasks:null,gloves:null,fetchAVErrorMsg:null,fetchCGErrorMsg:"Data is being fetched. Wait a moment..."},s.stockRegex=/<INSTOCKVALUE>(.*)<\/INSTOCKVALUE>/,s.manufacturerAV=[],s.avErrorToken=!1,s.categories=["gloves","facemasks","beanies"],s}return Object(l.a)(a,[{key:"render",value:function(){return Object(r.jsxs)(y.a,{children:[Object(r.jsxs)(y.a,{className:"C-B-Container",children:[Object(r.jsx)("h3",{children:"Select a category"}),Object(r.jsx)(m.a,{className:"categoryButtons",children:Object(r.jsxs)(A.a,{children:[Object(r.jsx)(f.a,{className:"categoryButton",value:"beanies",id:"getBeaniesButton",onClick:this.setCategory,children:"Beanies"}),Object(r.jsx)(f.a,{className:"categoryButton",value:"facemasks",id:"getFacemasksButton",onClick:this.setCategory,children:"Facemasks"}),Object(r.jsx)(f.a,{className:"categoryButton",value:"gloves",id:"getGlovesButton",onClick:this.setCategory,children:"Gloves"}),this.state.fetchAVErrorMsg&&Object(r.jsx)("span",{id:"avErrorSpan",children:this.state.fetchAVErrorMsg})]})})]}),Object(r.jsx)(m.a,{className:"table",children:Object(r.jsx)(A.a,{children:null==this.state.currCategory?Object(r.jsx)("h3",{id:"cgErrorH3",children:this.state.fetchCGErrorMsg}):Object(r.jsx)(j,{tableHeaders:["ID","Name of "+this.state.currCategory,"Color(s)","Price \u20ac","Manufacturer","Availability"],categoryData:this.getCategory(this.state.currCategory),fetchAvailability:this.fetchAvailability})})})]})}}]),a}(n.a.Component),C=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,56)).then((function(t){var a=t.getCLS,r=t.getFID,s=t.getFCP,n=t.getLCP,c=t.getTTFB;a(e),r(e),s(e),n(e),c(e)}))};a(54);i.a.render(Object(r.jsx)(n.a.StrictMode,{children:Object(r.jsx)(O,{})}),document.getElementById("root")),C()}},[[55,1,2]]]);
//# sourceMappingURL=main.b2610f1c.chunk.js.map